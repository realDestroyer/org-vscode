{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "vso",
  "scopeName": "source.vso",
  "patterns": [
    {
      "name": "entity.other.attribute-name.tag.vso",
      "comment": "Inline TAG block",
      "match": "\\[\\+TAG:[^\\]]*\\]"
    },
    {
      "name": "constant.character.in_progress.vso",
      "comment": "In Progress Task Symbol",
      "begin": "[\u2298]",
      "end": "$",
      "patterns": [
        { "include": "#in_progress" },
        { "include": "#tag" },
        { "include": "#task_text_in_progress" },
        { "include": "#sched" },
        { "include": "#scheduled" }
      ]
    },
    {
      "name": "constant.character.abandoned.vso",
      "comment": "Abandoned Task Symbol",
      "begin": "[\u2297]",
      "end": "$",
      "patterns": [
        { "include": "#abandoned" },
        { "include": "#task_text_abandoned" },
        { "include": "#sched" },
        { "include": "#scheduled" }
      ]
    },
    {
      "name": "constant.character.continued.vso",
      "begin": "[⊜]",
      "end": "$",
      "patterns": [
        { "include": "#continued" },
        { "include": "#tag" },
        { "include": "#task_text_continued" },
        { "include": "#sched" },
        { "include": "#scheduled" }
      ]
    },
    {
      "name": "markup.heading.vso",
      "comment": "Heading 1 unformatted",
      "begin": "[*]",
      "end": "$"
    },
    {
      "name": "keyword.other.vso",
      "comment": "Heading 2 unformatted",
      "begin": "(\\*{2})",
      "end": "$"
    },
    {
      "name": "keyword.operator.vso",
      "comment": "Heading 3 unformatted",
      "begin": "(\\*{3})",
      "end": "$"
    },
    {
      "name": "comment.vso",
      "comment": "Heading 3 unformatted",
      "begin": "(\\#\\+)",
      "end": "$"
    },
    {
      "name": "comment.vso",
      "match": "\\bCOMPLETED\\b"
    },
    {
      "name": "constant.character.todo.vso",
      "begin": "[⊙]",
      "end": "$",
      "patterns": [
        { "include": "#todo" },
        { "include": "#tag" },
        { "include": "#task_text_todo" },
        { "include": "#sched" },
        { "include": "#scheduled" }
      ]
    },
    {
      "name": "constant.character.done.vso",
      "begin": "[\u2296]",
      "end": "$",
      "patterns": [
        { "include": "#done" },
        { "include": "#task_text_done" },
        { "include": "#sched" },
        { "include": "#scheduled" }
      ]
    },
    {
      "name": "constant.numeric.date.vso",
      "match": "\\[(\\d{2}-\\d{2}-\\d{4})\\]"
    },
    {
      "name": "constant.numeric.date.header.vso",
      "match": "\\[\\d{2}-\\d{2}-\\d{4} \\w{3}\\]"
    }
  ],
  "repository": {
    "scheduled": {
      "patterns": [
        {
          "name": "keyword.scheduled.vso",
          "match": "SCHEDULED:\\s*\\[\\d{2}-\\d{2}-\\d{4}\\]"
        }
      ]
    },    
    "todo": {
      "patterns": [
        { "name": "keyword.control.todo.vso", "match": "\\bTODO\\b" }
      ]
    },
    "task_text_todo": {
      "patterns": [
        {
          "name": "string.task.todo.vso",
          "match": "(?<=TODO\\s+:\\s+\\[\\+TAG:[^\\]]*\\]\\s+-\\s+).*?(?=\\s+SCHEDULED:)"
        }
      ]
    },
    "task_text_in_progress": {
      "patterns": [
        {
          "name": "string.task.in_progress.vso",
          "match": "(?<=IN_PROGRESS\\s+:\\s+\\[\\+TAG:[^\\]]*\\]\\s+-\\s+).*?(?=\\s+SCHEDULED:)"
        }
      ]
    },
    "task_text_done": {
      "patterns": [
        {
          "name": "string.task.done.vso",
          "match": "(?<=DONE\\s+:\\s+\\[\\+TAG:[^\\]]*\\]\\s+-\\s+).*?(?=\\s+SCHEDULED:)"
        }
      ]
    },
    "task_text_abandoned": {
      "patterns": [
        {
          "name": "string.task.abandoned.vso",
          "match": "(?<=ABANDONED\\s+:\\s+\\[\\+TAG:[^\\]]*\\]\\s+-\\s+).*?(?=\\s+SCHEDULED:)"
        }
      ]
    },
    "task_text_continued": {
      "patterns": [
        {
          "name": "string.task.continued.vso",
          "match": "(?<=CONTINUED\\s+:\\s+\\[\\+TAG:[^\\]]*\\]\\s+-\\s+).*?(?=\\s+SCHEDULED:)"
        }
      ]
    },
    "done": {
      "patterns": [
        { "name": "entity.name.function.vso", "match": "\\bDONE\\b" }
      ]
    },
    "sched": {
      "patterns": [
        { "name": "comment.vso", "match": "^\\s*COMPLETED:\\s*\\[.*?\\]" }
      ]
    },
    "abandoned": {
      "patterns": [
        { "name": "keyword.control.abandoned.vso", "match": "\\bABANDONED\\b" }
      ]
    },
    "continued": {
      "patterns": [
        { "name": "markup.quote.continued.vso", "match": "\\bCONTINUED\\b" }
      ]
    },
    "in_progress": {
      "patterns": [
        { "name": "support.constant.in_progress.vso", "match": "\\bIN_PROGRESS\\b" }
      ]
    },
    "tag": {
      "patterns": [
        { "name": "entity.other.attribute-name.tag.vso", "match": "\\[\\+TAG:[^\\]]*\\]" }
      ]
    }
  }
}
